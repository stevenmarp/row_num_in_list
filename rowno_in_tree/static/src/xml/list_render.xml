<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
    <!-- Add header column for row number -->
    <t t-name="rowno_in_tree.ListRenderer" t-inherit="web.ListRenderer" t-inherit-mode="extension">
        <xpath expr="//table/thead/tr/th[hasclass('o_list_record_selector')]" position="before">
            <th class="o_list_row_number_header">#</th>
        </xpath>
    </t>

    <!-- Initialize row counter -->
    <t t-name="rowno_in_tree.ListRenderer.Rows" t-inherit="web.ListRenderer.Rows" t-inherit-mode="extension">
        <xpath expr="//t[@t-foreach='list.records']" position="before">
            <t t-set="RowNumber" t-value="1" />
        </xpath>
        <xpath expr="//t[@t-foreach='list.records']" position="inside">
            <t t-set="RowNumber" t-value="RowNumber + 1" />
        </xpath>
    </t>

    <!-- Add row number cell in each row -->
    <t t-name="rowno_in_tree.ListRenderer.RecordRow" t-inherit="web.ListRenderer.RecordRow" t-inherit-mode="extension">
        <xpath expr="//td[hasclass('o_list_record_selector')]" position="before">
            <td class="o_list_row_number" tabindex="-1">
                <span t-esc="RowNumber" />
            </td>
        </xpath>
    </t>
</templates>
